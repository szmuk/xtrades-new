<div class="table">

  <ion-grid>

  <!-- LOADING INDICATOR -->
  <ng-container *ngIf="loading">
    <ion-row *ngFor="let i of [].constructor(10)" class="table__row table__row--loading loading-line">
    </ion-row>
  </ng-container>


  <ng-container *ngIf="!loading">
    <!-- NO DATA PLACEHOLDER -->
    <ion-row *ngIf="alerts.length === 0">
      No alerts to show.
    </ion-row>

    <!-- ALERTS TABLE -->
    <ion-virtual-scroll *ngIf="alerts.length > 0" [items]="alerts" approxItemHeight="73px" [trackBy]="trackByFn">
        <ion-row *virtualItem="let alert; let itemBounds = bounds;" class="table__row" [class.table__row--closed]="alert.alertClosedDate"
          (click)="openAlert(alert)">
    
          <!-- AVATAR, NAME -->
          <ion-col size="12" size-md="12" size-lg="2">
            <div class="table__person">
    
              <app-avatar [profileId]="alert.userId" [alertsCount]="99"></app-avatar>
    
              <app-text-duplex class="table__person__info">
                <ng-container upper>{{alert.userName}}</ng-container>
                <ng-container lower>{{'@' + alert.userName}}</ng-container>
              </app-text-duplex>
            </div>
          </ion-col>
    
          <!-- COMPANY, ACTION -->
          <ion-col size="12" size-md="12" size-lg="3">
            <div class="table__action">
    
              <app-company-logo></app-company-logo>
    
              <app-text-duplex class="table__action__info">
                <ng-container upper>{{(alert.alertClosedDate ? 'Sold ' : 'Bought ') + alert.symbol + ' shares'}}</ng-container>
                <ng-container lower>{{'@ USD ' + alert.pricePaid}}</ng-container>
              </app-text-duplex>
              
            </div>
          </ion-col>
    
          <!-- DATE -->
          <ion-col size="6" size-md="3" size-lg="2">
            <div class="table__date">
              <app-text-duplex>
                <ng-container upper>{{'Closed ' + getDate(alert.alertClosedDate) }}</ng-container>
                <ng-container lower>{{'Opened ' + getDate(alert.timeOfEntryAlert) }}</ng-container>
              </app-text-duplex>
            </div>
          </ion-col>
    
          <!-- TYPE -->
          <ion-col size="6" size-md="3" size-lg="1">
            <div class="table__type">
              <div class="table__type__text">
                <!-- {{alert.type}} -->
                Swing
              </div>
            </div>
          </ion-col>
    
          <!-- RESULT -->
          <ion-col size="6" size-md="3" size-lg="2">
            <div class="table__result">
              <div>
                <div class="table__result__container table__result__container--made"
                  *ngIf="alert.alertClosedDate && alert.diffCalc > 0">
                  Made {{alert.diffCalc}}%
                </div>
                <div class="table__result__container table__result__container--lost"
                  *ngIf="alert.alertClosedDate && alert.diffCalc < 0">
                  Lost {{(alert.diffCalc * -1)}}%
                </div>
                <div class="table__result__container table__result__container--up"
                  *ngIf="!alert.alertClosedDate && alert.diffCalc > 0">
                  Up {{alert.diffCalc}}%
                </div>
                <div class="table__result__container table__result__container--down"
                  *ngIf="!alert.alertClosedDate && alert.diffCalc < 0">
                  Down {{(alert.diffCalc * -1)}}%
                </div>
                <div class="table__result__container table__result__container--zero" *ngIf="alert.diffCalc === 0">
                  {{alert.diffCalc}}%
                </div>
              </div>
            </div>
          </ion-col>
    
          <!-- ACTIONS -->
          <ion-col size="6" size-md="3" size-lg="2">
            <div class="table__actions">
              <div class="table__actions__action" [class.table__actions__action--toggled]="false"
                (click)="comment($event, alert)">
                <ion-icon name="chatbox"></ion-icon>
                <div>{{99}}</div>
              </div>
              <div class="table__actions__action" [class.table__actions__action--toggled]="false"
                (click)="save($event, alert)">
                <ion-icon name="bookmark"></ion-icon>
                <div>{{99}}</div>
              </div>
              <div class="table__actions__action" [class.table__actions__action--toggled]="alert.alertSentimentHasLiked"
                (click)="like($event, alert)">
                <ion-icon name="thumbs-up"></ion-icon>
                <div>{{alert.alertSentimentLikeCount}}</div>
              </div>
            </div>
          </ion-col>
    
    
        </ion-row>
    </ion-virtual-scroll>
  </ng-container>

  </ion-grid>

</div>